<template>
  <div class="m-zaap-autoupdate--progress" v-if="downloadProgress && downloadProgress.percent <= 100">
    <div class="m-zaap-autoupdate--progress-bar" :style="progressBarStyle"></div>
  </div>
</template>

<script>
  VueComponent(this, 'zaap-autoupdate-progress', {
    computed: {
      downloadProgress() {
        return this.$store.state.autoUpdater.downloadProgress
      },
      progressBarStyle() {
        if (!this.downloadProgress) {
          return null
        }

        return {
          width: `${this.downloadProgress.percent}%`,
        }
      },
    },
  })
</script>

<style>
  .m-zaap-autoupdate--progress {
    position: absolute;
    left: 50%;
    bottom: 7px;
    display: block;
    width: calc(var(--aside-width) / 2);
    height: 2px;
    background: var(--color-white-30);
    z-index: 99;
    transform: translateX(-50%);
  }

  .m-zaap-autoupdate--progress-bar {
    display: block;
    width: 100%;
    height: 100%;
    background: var(--color-primary);
    transition: width 150ms;
  }
</style>
